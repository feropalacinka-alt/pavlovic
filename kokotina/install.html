<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup - Autobaz√°r</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f3f4f6;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        h1 { color: #2563eb; }
        h2 { color: #1f2937; margin-top: 30px; }
        .step {
            background: #f9fafb;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #2563eb;
            border-radius: 4px;
        }
        .step h3 { margin-top: 0; color: #1f2937; }
        .button {
            display: inline-block;
            background: #2563eb;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            margin: 10px 5px 10px 0;
        }
        .button:hover {
            background: #1e40af;
        }
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
        }
        .success {
            background: #dcfce7;
            border-left: 4px solid #16a34a;
            padding: 15px;
            margin: 20px 0;
        }
        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöó Autobaz√°r - Setup Sprievodca</h1>
        
        <div class="warning">
            <strong>‚ö†Ô∏è Pozn√°mka:</strong> Pred pokraƒçovan√≠m sa uistite, ≈æe m√°te spusten√©:
            <ul>
                <li><strong>Apache</strong> - Web server (v XAMPP Control Panel ‚Üí START)</li>
                <li><strong>MySQL</strong> - Datab√°za (v XAMPP Control Panel ‚Üí START)</li>
            </ul>
        </div>

        <h2>Krok 1: Kontrola MySQL</h2>
        <div class="step">
            <h3>Stav MySQL serveru</h3>
            <p>Skontrolujeme, ƒçi je MySQL dostupn√Ω...</p>
            <?php
                $mysqli = @new mysqli("localhost", "root", "");
                if ($mysqli->connect_error) {
                    echo '<div class="warning">';
                    echo '<strong>‚ùå MySQL nie je dostupn√Ω</strong><br>';
                    echo 'Chyba: ' . htmlspecialchars($mysqli->connect_error) . '<br><br>';
                    echo '‚úì Rie≈°enie:<br>';
                    echo '1. Otvorte XAMPP Control Panel<br>';
                    echo '2. Kliknite "START" vedƒæa "MySQL"<br>';
                    echo '3. Poƒçkajte 10 sek√∫nd<br>';
                    echo '4. Osvie≈æte t√∫to str√°nku (F5)<br>';
                    echo '</div>';
                } else {
                    echo '<div class="success">';
                    echo '<strong>‚úÖ MySQL je pripojen√Ω!</strong><br>';
                    echo 'Verzia: ' . $mysqli->server_info . '<br>';
                    echo '</div>';
                    
                    // Krok 2: Vytvorenie datab√°zy
                    echo '</div><h2>Krok 2: Vytvorenie Datab√°zy</h2><div class="step">';
                    echo '<h3>Inicializ√°cia datab√°zy</h3>';
                    
                    if ($mysqli->query("CREATE DATABASE IF NOT EXISTS autobazar")) {
                        echo '<div class="success">‚úÖ Datab√°za "autobazar" existuje</div>';
                        
                        $mysqli->select_db("autobazar");
                        
                        // Zavolaj database.php na inicializ√°ciu
                        ob_start();
                        include __DIR__ . '/database.php';
                        $init_output = ob_get_clean();
                        
                        echo '<div class="success">';
                        echo '<strong>‚úÖ Datab√°za bola √∫spe≈°ne inicializovan√°!</strong><br>';
                        echo 'Vytvoren√©:<br>';
                        echo '- 5 tabuliek<br>';
                        echo '- 1 admin √∫ƒçet (admin/admin123)<br>';
                        echo '- 5 vzorov√Ωch √°ut<br>';
                        echo '</div>';
                    } else {
                        echo '<div class="warning">';
                        echo '<strong>‚ùå Chyba pri vytv√°ran√≠ datab√°zy:</strong><br>';
                        echo htmlspecialchars($mysqli->error);
                        echo '</div>';
                    }
                    
                    $mysqli->close();
                }
            ?>
        </div>

        <h2>Krok 3: Prejdite na aplik√°ciu</h2>
        <div class="step">
            <h3>Hotovo! üéâ</h3>
            <p>Kliknite ni≈æ≈°ie na tlaƒçidla pre pr√≠stup k aplik√°cii:</p>
            <p>
                <a href="index.php" class="button">üè† Domovsk√° str√°nka</a>
                <a href="admin.php" class="button">üë§ Admin Panel</a>
            </p>
            <p>
                <strong>Admin prihl√°≈°ka:</strong><br>
                Meno: <code>admin</code><br>
                Heslo: <code>admin123</code>
            </p>
        </div>

        <h2>ƒåo sa stalo?</h2>
        <div class="step">
            <h3>Datab√°zov√© tabuƒæky:</h3>
            <ul>
                <li><strong>cars</strong> - Zoznam √°ut</li>
                <li><strong>car_images</strong> - Obr√°zky √°ut</li>
                <li><strong>orders</strong> - Objedn√°vky</li>
                <li><strong>order_items</strong> - Polo≈æky objedn√°vok</li>
                <li><strong>admin_users</strong> - Administr√°tori</li>
            </ul>
            <h3>Vzorov√© d√°ta:</h3>
            <ul>
                <li>5 √°ut (Volkswagen, BMW, Mercedes, Toyota, Audi)</li>
                <li>1 admin √∫ƒçet (admin / admin123)</li>
            </ul>
        </div>

        <div class="warning">
            <strong>üí° Tip:</strong> Ak chcete datab√°zu vymaza≈• a znova inicializova≈•, 
            <a href="reset.php">kliknite sem</a>.
        </div>
    </div>
</body>
</html>
